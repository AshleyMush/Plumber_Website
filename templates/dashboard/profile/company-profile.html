{% extends '/dashboard/base.html' %}

{% block title %}Company Profile{% endblock %}

{% block content %}
<div class="container-fluid">
    <h1 class="h3 mb-2 text-gray-800">Company Profile</h1>

    <div class="row">
        <div class="col-lg-6 mb-4">
            <!-- Email Form -->
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Update Email</h6>
                </div>
                <div class="card-body">
                    <form id="emailForm" method="POST" action="{{ url_for('dashboard_bp.update_email') }}">
                        {{ email_form.hidden_tag() }}
                        <div class="form-group">
                            {{ email_form.email.label(class="form-label") }}
                            {{ email_form.email(class="form-control", id="emailInput", readonly=True) }}
                        </div>
                        <button type="button" class="btn btn-primary mt-2" id="editEmailButton">Edit</button>
                        {{ email_form.submit(class="btn btn-success mt-2 d-none", id="saveEmailButton") }}
                        <button type="button" class="btn btn-secondary mt-2 d-none" id="cancelEmailButton">Cancel</button>
                    </form>
                </div>
            </div>

            <!-- Phone Number Form -->
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Update Phone Number</h6>
                </div>
                <div class="card-body">
                    <form id="phoneForm" method="POST" action="{{ url_for('dashboard_bp.update_phone_number') }}">
                        {{ phone_form.hidden_tag() }}
                        <div class="form-group">
                            {{ phone_form.phone_number.label(class="form-label") }}
                            {{ phone_form.phone_number(class="form-control", id="phoneInput", readonly=True) }}
                        </div>
                        <button type="button" class="btn btn-primary mt-2" id="editPhoneButton">Edit</button>
                        {{ phone_form.submit(class="btn btn-success mt-2 d-none", id="savePhoneButton") }}
                        <button type="button" class="btn btn-secondary mt-2 d-none" id="cancelPhoneButton">Cancel</button>
                    </form>
                </div>
            </div>

            <!-- Password Change Form -->
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Change Password</h6>
                </div>
                <div class="card-body">
                    <form id="passwordForm" method="POST" action="{{ url_for('dashboard_bp.change_password') }}">
                        {{ password_form.hidden_tag() }}
                        <div class="form-group">{{ password_form.current_password.label(class="form-label") }}{{
                            password_form.current_password(class="form-control") }}</div>
                        <div class="form-group">{{ password_form.new_password.label(class="form-label") }}{{
                            password_form.new_password(class="form-control") }}</div>
                        <div class="form-group">{{ password_form.confirm_new_password.label(class="form-label") }}{{
                            password_form.confirm_new_password(class="form-control") }}</div>
                        {{ password_form.submit(class="btn btn-primary mt-3") }}
                    </form>
                </div>
            </div>
        </div>

        <div class="col-lg-6 mb-4">
            <!-- Company Details Form -->
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Company Details</h6>
                </div>
                <div class="card-body">
                    <form method="POST" action="{{ url_for('dashboard_bp.update_company_details') }}" enctype="multipart/form-data">
                        {{ company_form.hidden_tag() }}
                        
                        <div class="form-group">
                            {{ company_form.name.label(class="form-label") }}
                            {{ company_form.name(class="form-control") }}
                        </div>

                        {% if company_details and company_details.logo %}
                        <div class="form-group">
                            <label>Current Logo:</label>
                            <img src="{{ url_for('static', filename='uploads/company_logos/' + company_details.logo) }}" alt="Company Logo"
                                class="img-fluid" style="max-width: 100px;">
                        </div>
                        {% endif %}

                        <div class="form-group">
                            {{ company_form.logo.label(class="form-label") }}
                            {{ company_form.logo(class="form-control") }}
                        </div>

                        <div class="form-group">
                            {{ company_form.address.label(class="form-label") }}
                            {{ company_form.address(class="form-control") }}
                        </div>
                        <div class="form-group">
                            {{ company_form.motto.label(class="form-label") }}
                            {{ company_form.motto(class="form-control") }}
                        </div>
                        <div class="form-group">
                            {{ company_form.about.label(class="form-label") }}
                            {{ company_form.about(class="form-control") }}
                        </div>
                        <div class="form-group">
                            {{ company_form.openingHours.label(class="form-label") }}
                            {{ company_form.openingHours(class="form-control") }}
                        </div>
                        <div class="form-group">
                            {{ company_form.weekendHours.label(class="form-label") }}
                            {{ company_form.weekendHours(class="form-control") }}
                        </div>
                        {{ company_form.submit(class="btn btn-success mt-2") }}
                    </form>
                </div>
            </div>

            <!-- Social Media Links Form -->
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Social Media Links</h6>
                </div>
                <div class="card-body">
                    <form method="POST" action="{{ url_for('dashboard_bp.update_socials') }}">
                        {{ socials_form.hidden_tag() }}
                        <div class="form-group">
                            {{ socials_form.instagram.label(class="form-label") }}
                            {{ socials_form.instagram(class="form-control") }}
                        </div>
                        <div class="form-group">
                            {{ socials_form.whatsapp.label(class="form-label") }}
                            {{ socials_form.whatsapp(class="form-control") }}
                        </div>
                        <div class="form-group">
                            {{ socials_form.youtube.label(class="form-label") }}
                            {{ socials_form.youtube(class="form-control") }}
                        </div>
                        <div class="form-group">
                            {{ socials_form.facebook.label(class="form-label") }}
                            {{ socials_form.facebook(class="form-control") }}
                        </div>
                        <div class="form-group">
                            {{ socials_form.threads.label(class="form-label") }}
                            {{ socials_form.threads(class="form-control") }}
                        </div>
                        <div class="form-group">
                            {{ socials_form.x.label(class="form-label") }}
                            {{ socials_form.x(class="form-control") }}
                        </div>
                        {{ socials_form.submit(class="btn btn-success mt-2") }}
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}